// ===================================================================================
// User Configurations for CH552T Dual Mode Controller
// HID Joystick + MIDI Controller
// ===================================================================================

#pragma once

// ===================================================================================
// 模式定义
// ===================================================================================
#define MODE_HID            0           // HID飞行控制器模式
#define MODE_MIDI           1           // MIDI控制器模式

// ===================================================================================
// 硬件引脚定义（统一布局，两种模式共用）
// ===================================================================================

// ADC引脚（旋钮/电位器）
#define PIN_POT1            P14         // P1.4 (AIN1) - 旋钮1: HID油门 / MIDI CC1
#define PIN_POT2            P11         // P1.1 (AIN0) - 旋钮2: HID反推 / MIDI Pitch Bend

// 按钮引脚
#define PIN_BUTTON1         P31         // P3.1 - 按钮1: HID按钮1 / MIDI音符C1
#define PIN_BUTTON2         P32         // P3.2 - 按钮2: HID按钮2 / MIDI音符A1
#define PIN_BUTTON3         P16         // P1.6 - 按钮3: HID按钮3 / MIDI功能键(+12)
#define PIN_BUTTON4         P17         // P1.7 - 按钮4: HID按钮4 / MIDI功能键(-12)

// 功能引脚
// 注意：模式选择使用按钮1(P31/P3.1)，上电时检测：松开=HID, 按住=MIDI
#define PIN_LED             P30         // P3.0 - 板载LED（HID闪3次 / MIDI闪5次）

// ===================================================================================
// MIDI配置
// ===================================================================================
#define MIDI_NOTE_C4        60          // MIDI音符C4（中央C）
#define MIDI_NOTE_A4        69          // MIDI音符A4
#define MIDI_OCTAVE_SHIFT   12          // 八度移调（半音数）
#define MIDI_CC13           13          // MIDI CC13（Effect Control 1）
#define MIDI_VELOCITY       100          // MIDI默认力度（中等）

// ===================================================================================
// ADC校准配置（解决电位器行程不满的问题）
// ===================================================================================
// 注意：这些值需要根据实际电位器调整
// 如果旋钮无法达到满行程，请调整这两个值：
// - 将CC13旋钮转到最左端，记录MIDI值，如果不是0，说明ADC_MIN需要调低
// - 将CC13旋钮转到最右端，记录MIDI值，如果不是127，说明ADC_MAX需要调高
#define ADC_MIN             0           // ADC实际最小值（保守设置）
#define ADC_MAX             174         // ADC实际最大值（根据68%行程推测）

// ===================================================================================
// USB设备描述符
// ===================================================================================
#define USB_VENDOR_ID       0x1189      // VID (使用通用VID)
#define USB_PRODUCT_ID      0x8891      // PID
#define USB_DEVICE_VERSION  0x0100      // v1.0 (BCD格式)
#define USB_MAX_POWER_mA    100         // 最大功耗 mA

// ===================================================================================
// USB描述符字符串 - HID模式
// ===================================================================================
#define MANUFACTURER_STR    'D','I','Y'
#define PRODUCT_STR_HID     'D','u','a','l',' ','M','o','d','e',' ','C','o','n','t','r','o','l','l','e','r',' ','(','H','I','D',')'
#define SERIAL_STR          'C','H','5','5','2','T','D','U','A','L'
#define INTERFACE_STR_HID   'G','a','m','e',' ','C','o','n','t','r','o','l','l','e','r'

// USB描述符字符串 - MIDI模式（暂时使用HID，后续添加MIDI描述符）
#define PRODUCT_STR_MIDI    'D','u','a','l',' ','M','o','d','e',' ','C','o','n','t','r','o','l','l','e','r',' ','(','M','I','D','I',')'
#define INTERFACE_STR_MIDI  'M','I','D','I',' ','C','o','n','t','r','o','l','l','e','r'

// 默认使用HID字符串（兼容性）
#define PRODUCT_STR         PRODUCT_STR_HID
#define INTERFACE_STR       INTERFACE_STR_HID
